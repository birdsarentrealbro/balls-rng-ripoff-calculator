<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ball Config Chances</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      line-height: 1.6;
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    }
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 40px;
      font-size: 2.5em;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    h2 {
      color: #34495e;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-top: 40px;
      margin-bottom: 20px;
      font-size: 1.5em;
      font-weight: 600;
    }
    table {
      width: 100%; border-collapse: collapse; margin-bottom: 30px;
      background: white; border-radius: 8px; overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    th, td { border: 1px solid #e8ecf0; padding: 12px 16px; text-align: left; }
    th { background: #f8f9fa; color: #495057; font-weight: 600; text-transform: uppercase; }
    tr:nth-child(even) { background: #f8f9fa; }
    tr:hover { background: #e3f2fd; transition: background-color 0.2s ease; }
    .section {
      margin-bottom: 40px; padding: 30px; background: white;
      border-radius: 12px; border: 1px solid #e8ecf0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    label { font-weight: 500; display: block; margin-bottom: 8px; }
    select {
      width: 100%; padding: 12px 16px; margin-bottom: 20px;
      border-radius: 8px; border: 2px solid #dee2e6;
    }
    .variants-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 12px; margin-bottom: 25px; padding: 20px;
      background: #f8f9fa; border-radius: 8px; border: 1px solid #e8ecf0;
    }
    .variant-item {
      display: flex; align-items: center; background: white;
      padding: 12px 16px; border-radius: 8px; border: 1px solid #dee2e6;
      cursor: pointer;
    }
    .variant-item input { margin-right: 12px; transform: scale(1.2); }
    #combinedChanceDisplay {
      font-size: 1.1em; font-weight: 600;
      margin-top: 25px; padding: 20px;
      background: linear-gradient(135deg, #27ae60, #2ecc71);
      color: white; border-radius: 8px; text-align: center;
    }
    #comparisonList li {
      margin: 8px 0;
      padding: 10px 15px;
      border-left: 4px solid #3498db;
      background: #f8f9fa;
      border-radius: 6px;
      font-weight: 500;
      color: #2c3e50;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Ball Configuration Chances</h1>

  <div class="section" id="rarityChancesSection">
    <h2>Rarity Chances</h2>
    <table><thead><tr><th>Name</th><th>Weight</th><th>Chance</th></tr></thead>
    <tbody id="rarityTableBody"></tbody></table>
  </div>

  <div class="section" id="variantChancesSection">
    <h2>Variant Chances</h2>
    <table><thead><tr><th>Name</th><th>Weight</th><th>Chance</th></tr></thead>
    <tbody id="variantTableBody"></tbody></table>
  </div>

  <div class="section" id="testRaritySection">
    <h2>Ball Rarity Calculator</h2>
    <label for="raritySelect">Choose Rarity:</label>
    <select id="raritySelect"><option value="">-- Select Rarity --</option></select>
    <h3>Choose Variant Traits:</h3>
    <div id="variantCheckboxes" class="variants-grid"></div>
    <div id="combinedChanceDisplay">Combined Chance: N/A</div>
  </div>

  <div class="section" id="comparisonSection">
    <h2>Probability Comparison</h2>
    <ul id="comparisonList"></ul>
  </div>
</div>

<script>
const BallConfig_RarityLevels = [
  { Name: "Common", Weight: 44.4 },
  { Name: "Uncommon", Weight: 25 },
  { Name: "Rare", Weight: 15 },
  { Name: "Epic", Weight: 10 },
  { Name: "Legendary", Weight: 3.5 },
  { Name: "Mythic", Weight: 1.5 },
  { Name: "Exotic", Weight: 0.5 },
  { Name: "Unreal", Weight: 0.1 },
];

const BallConfig_Variants = [
  { Name: "Normal", Weight: 2000 },
  { Name: "Glowing", Weight: 500 },
  { Name: "Flaming", Weight: 300 },
  { Name: "Bouncy", Weight: 200 },
  { Name: "Doge", Weight: 160 },
  { Name: "Metallic", Weight: 130 },
  { Name: "Cubed", Weight: 110 },
  { Name: "Wedged", Weight: 95 },
  { Name: "Tiny", Weight: 75 },
  { Name: "Huge", Weight: 65 },
  { Name: "Crystal", Weight: 55 },
  { Name: "Sticky", Weight: 50 },
  { Name: "Toxic", Weight: 45 },
  { Name: "Icy", Weight: 40 },
  { Name: "Wide", Weight: 35 },
  { Name: "Thin", Weight: 35 },
  { Name: "Highlighted", Weight: 30 },
  { Name: "Ghost", Weight: 25 },
  { Name: "Electric", Weight: 20 },
  { Name: "Corner Wedged", Weight: 15 },
  { Name: "Shadow", Weight: 10 },
  { Name: "Cylinder", Weight: 7 },
  { Name: "Unstable", Weight: 5 },
  { Name: "Rainbow", Weight: 2 },
];

const comparisons = [
  { name: "flipping heads once", probability: 0.5 },
  { name: "flipping heads 10 times in a row", probability: Math.pow(0.5, 10) },
  { name: "being struck by lightning in a year", probability: 1/1200000 },
  { name: "winning the Powerball jackpot", probability: 1/292200000 },
  { name: "royal flush in poker", probability: 1/649740 },
  { name: "rolling a natural 20 on a d20", probability: 1/20 },
  { name: "winning 5 dollars on a scratch off", probability: 1/4 },
  { name: "shuffling a rubix cube to be exactly solved", probability: 1/43252003274489856000 },
];

document.addEventListener("DOMContentLoaded", () => {
  const totalRarityWeight = BallConfig_RarityLevels.reduce((s, r) => s+r.Weight, 0);
  const totalVariantWeight = BallConfig_Variants.reduce((s, v) => s+v.Weight, 0);

  const rarityTableBody = document.getElementById("rarityTableBody");
  const variantTableBody = document.getElementById("variantTableBody");
  const raritySelect = document.getElementById("raritySelect");
  const variantCheckboxesContainer = document.getElementById("variantCheckboxes");
  const combinedChanceDisplay = document.getElementById("combinedChanceDisplay");
  const comparisonList = document.getElementById("comparisonList");

  function formatChance(p) {
    return `${(p*100).toFixed(6)}% (1 in ${(1/p).toLocaleString()})`;
  }

  BallConfig_RarityLevels.forEach((r, i) => {
    const chance = r.Weight/totalRarityWeight;
    const row = rarityTableBody.insertRow();
    row.insertCell().textContent = r.Name;
    row.insertCell().textContent = r.Weight;
    row.insertCell().textContent = formatChance(chance);

    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = r.Name;
    raritySelect.appendChild(opt);
  });

  BallConfig_Variants.forEach((v) => {
    const chance = v.Weight/totalVariantWeight;
    const row = variantTableBody.insertRow();
    row.insertCell().textContent = v.Name;
    row.insertCell().textContent = v.Weight;
    row.insertCell().textContent = formatChance(chance);

    const div = document.createElement("div");
    div.classList.add("variant-item");
    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.dataset.weight = v.Weight;
    cb.dataset.name = v.Name;
    const lbl = document.createElement("label");
    lbl.textContent = v.Name;
    div.appendChild(cb); div.appendChild(lbl);
    variantCheckboxesContainer.appendChild(div);
  });

  function updateComparisons(p) {
    comparisonList.innerHTML = "";
    if (p <= 0) return;

    let best = null, bestDiff = Infinity;
    comparisons.forEach(c => {
      const times = Math.log(1/p)/Math.log(1/c.probability);
      const approx = Math.pow(c.probability, times);
      const diff = Math.abs(Math.log(p) - Math.log(approx));
      if (diff < bestDiff) {
        bestDiff = diff;
        best = { ...c, times: Math.round(times) };
      }
    });

    if (best) {
      const li = document.createElement("li");
      if (best.times > 1) {
        li.textContent = `That ball spawning is like ${best.name} happening ${best.times} times in a row.`;
      } else {
        li.textContent = `That ball spawning is like ${best.name}.`;
      }
      comparisonList.appendChild(li);
    }
  }

  function updateCombinedChance() {
    if (raritySelect.value === "") {
      combinedChanceDisplay.textContent = "Combined Chance: N/A";
      comparisonList.innerHTML = "";
      return;
    }
    const rarity = BallConfig_RarityLevels[raritySelect.value];
    let prob = rarity.Weight/totalRarityWeight;
    document.querySelectorAll("#variantCheckboxes input:checked").forEach(cb => {
      prob *= (cb.dataset.weight/totalVariantWeight);
    });
    combinedChanceDisplay.textContent = "Combined Chance: " + formatChance(prob);
    updateComparisons(prob);
  }

  raritySelect.addEventListener("change", updateCombinedChance);
  document.querySelectorAll("#variantCheckboxes input").forEach(cb => {
    cb.addEventListener("change", updateCombinedChance);
  });
});
</script>
</body>
</html>
